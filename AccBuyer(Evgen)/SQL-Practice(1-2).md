# MS-SQLServer-Практика

# Практическая работа № 1-2
Цель работы: Приобретение навыков установки и настройки сервера баз данных MS SQL SERVER 2017 EXPRESS.

# Описание предметной области

База данных создаётся для информационного обслуживания издательств. БД должна содержать данные о авторах, сотрудниках, информацию о статьях авторов, финансовом состоянии компании и предоставлять возможность получать разнообразные отчёты.
### В соответствии с предметной областью система строится с учётом следующих особенностей:
- Каждый автор имеет контракт с издательством;
- Каждое издательство имеет приоретет авторов и статей;
- В базе данных о каждом издателе,авторе,сотруднике имеется подробная информация (Пример: Имя, Идентификаторы, Зависимость с остальными сущностями).
- В базе данных содержится информаиция о месте работе, должности в издательстве (Например Менеджер), уровень работы(сложности работы).
- Каждый издатель имеет подробную финансовую информацию и отчетность об работе авторов. 
### Выделим базовые сущности этой предметной области:
- Сотрудники издательств. Атрибуты сотрудников – ФИ, табельный номер, идентификатор по которому определяется вид работы, уровень работы, идентификатор издателя на котрого он работает, дата устройства на работу.
- Авторы. Атрибуты авторов – ФИ, телефон, домашний адрес, город, штат, почтовый индекс,контракт с автором и уникальный идентификатор. Для авторов необходимо хранить сведения о написанных публикациях.
- Публикация. Атрибуты публикации – автор, название, налоги, дата публикации, примечания, годовые продажи, цена, приорететность, идентификатор издательства, тип публикации, тип публикации.
- Издательство. Атрибуты издательства - идентификатор издательства, город, штат, страна, имя издательства, также логотип, подробная информация.
- Статьи будем рассматривать как связь между авторами и издательствами. 
- Контракт показывает занят ли автор. 
Для отражения финансового положения компании в системе нужно учитывать продажи, стоимости статей, скидки. Для заказа необходимо хранить номер заказа, контакты оплаты, номер издания на котрый был сделан заказ, заказанных публикаций с указанием количества экземпляров.
## Описание таблиц созданных скриптом Instpubs.sql

#### Таблица 1 - Авторы (Authors)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| au_id         | ID/Номер автора    | id(varchar(11)) *Значение NULL не принимается* | PK - Первичный ключ            |
| au_Lname         | Фамилия   | varchar(40) *Значение NULL не принимается* |             |
| au_Fname         | Имя    | varchar(20) *Значение NULL не принимается* |             |
| phone        | Телефон(Автора)    | char(12) *Значение NULL не принимается*|             |
| address        | Адрес(Автора)    | varchar(40) *или NULL* |     PK - Первичный ключ          |
| city       | Город   | varchar(20) *или NULL* |             |
| state       | Штат   | char(2) *или NULL* |             |
| zip       | Почтовый индекс   | char(5) *или NULL* |             |
| contract       | Контракт с издательством   | bit *Значение NULL не принимается* |             |

#### Таблица 2 - Скидки/Акции (Discounts)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| discounttype        | Тип скидки    | varchar(40) *Значение NULL не принимается* | |
| store_id        | ID/Номер скидки    | char(4)  *или NULL* | FK - внешний ключ |
| lowqty       | Минимальный размер скидки    | smallint  *или NULL* |  |
| highqty       | Максимальный размер скидки    | smallint  *или NULL* |  |
| discount       | Скидка    | decimal(4,2)  *Значение NULL не принимается* |  |

#### Таблица 3 - Сотрудники (Employee)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| emp_id        | ID/Номер сотрудника    | Empid(char(9)) *Значение NULL не принимается* | PK - Первичный ключ |
| fname        | Имя    | varchar(20) *Значение NULL не принимается* | |
| minit        | ???    | char(1) *или NULL*  | |
| lname        | Фамилия    | varchar(3) *Значение NULL не принимается*  | |
| job_id        | ID/Номер работы    | smallint *Значение NULL не принимается*  | FK - внешний ключ |
| job_lvl        | Level-Работы    | tinyint *или NULL*  | |
| pub_id        | ID/Идентификатор издателя    | char(4) *Значение NULL не принимается*  | FK - внешний ключ |
| hire_date        | Дата устройства на работу    | datetime *Значение NULL не принимается*  |  |

#### Таблица 4 - Работа/Описание работы (Jobs)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| job_id        | ID/Номер работы    | smallint *Значение NULL не принимается* | PK - Первичный ключ |
| job_desc        | Описание работы    | varchar(50) *Значение NULL не принимается* |  |
| min_lvl        | Минимальный уровень работы   | tinyint *Значение NULL не принимается* | |
| max_id        | Максимальный уровень работы    | tinyint *Значение NULL не принимается* |  |

#### Таблица 5 - Информация о издателях (PubInfo)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| pub_id        | ID/Номер издателя   | char(4) *Значение NULL не принимается* | PK - Первичный ключ |
| logo        | Логотип издателя   | image  *или NULL* |  |
| pr_info        | Информациия о издателе  | text  *или NULL* | |

#### Таблица 6 - Издатели (Publishers)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| pub_id        | ID/Номер издателя    | char(4) *Значение NULL не принимается* | PK - Первичный ключ |
| pub_name        | Имя издателя   | varchar(40)  *или NULL* |  |
| city       | Город  | varchar(20)  *или NULL* | |
| state       | Штат| char(2)  *или NULL* | |
| country       | Страна  | varchar(30)  *или NULL* | |



#### Таблица 7 - Приоретет (Roysched)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| title_id        | ID/Номер издания    | tid(varchar(6) *Значение NULL не принимается* | FK - внешний ключ  |
| lorange        | Оценка Приорететность   | int *или NULL*  |  |
| hirange       |  Оценка Приорететность      | int *или NULL*  |  |
| royalty       | Приортет     | int *или NULL*  |  |

#### Таблица 8 - Товарооборот (Sales)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| stor_id        | ID/Номер магазина    | char(4) *Значение NULL не принимается* | PK/FK - первичный/внешний ключ  |
| ord_num       | ID/Номер заказа    | varchar(20) *Значение NULL не принимается* | PK - Первичный ключ |
| ord_date       | Дата когда был сделан заказ    | datetime *Значение NULL не принимается* ||
| qty       | Количество обьектов в заказе    | smallint *Значение NULL не принимается* ||
| payterms       | Связано с оплатой   | varchar(12) *Значение NULL не принимается* ||
| title_id       | ID/Номер публикации  | varchar(6) *Значение NULL не принимается* |PK/FK - первичный/внешний ключ|

#### Таблица 9 - Магазины (Stores)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| stor_id        | ID/Номер магазина    | char(4) *Значение NULL не принимается* | PK - Первичный ключ  |
| stor_name        | Наименование магазина    | varchar(40) *или NULL* |  |
| stor_address        |  Адрес магазина    | varchar(40) *или NULL* |  |
| city        |  Город    | varchar(20) *или NULL* |  |
| state        |  Штат    | char(2) *или NULL* |  |
| zip        |  Индекс   | char(5) *или NULL* |  |

#### Таблица 10 - Статья автора (titleauthor)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| au_id       | ID/Индефикатор автора    | id(varchar(11)) *Значение NULL не принимается* | PK/FK - первичный/внешний ключ  |
| title_id       | ID/идентификатор названия    | tid(varchar(6)) *Значение NULL не принимается* | PK/FK - первичный/внешний ключ  |
| au_ord     | Автор заказа    | tinyint *или NULL*  |   |
| royaltyper       | Приоретет писателя    | int *или NULL*  | |


#### Таблица 11 - Статья (Titles)
| Атрибуты     | Описание           | Домен         | Примечение  |
| :-------------: |:------------------:| :-------------:|:------------:|
| title_id       | ID/Номер издателя   | tid(varchar(6)) *Значение NULL не принимается* | PK - Первичный ключ  |
| title       | Название издания   | varchar(80) *Значение NULL не принимается* |  |
| type     | Тип издания    | char(12) *Значение NULL не принимается*   |   |
| pub_id       | ID/Идентификатор издателя    | int *или NULL*  |FK - внешний ключ |
| price    | Цена    | money *или NULL*    |   |
| advance    | Налоги    | money *или NULL*    |   |
| royalty    | Роялти издателю    | int *или NULL*    |   |
| ytd_sales    | Годовые продажи    | int *или NULL*    |   |
| notes    | Примечания/Описание    | varchar(200) *или NULL*    |   |
| pubdate   | Дата Публикации    | datetime *Значение NULL не принимается*     |   |


## Скриншоты о проделанной работе:
### Диаграммы

![alt-У вас не загрузилось :( ](http://ipic.su/img/img7/fs/SQL12-1.1567451437.png "SQLServer12")
![alt-У вас не загрузилось :( ](http://ipic.su/img/img7/fs/SQP12.1567451579.png "SQLServer12-1")

### Данные

***Примеры данных***
![alt-У вас не загрузилось :( ](http://ipic.su/img/img7/fs/image.1567752874.png "SQLServer12-1")
![alt-У вас не загрузилось :( ](http://ipic.su/img/img7/fs/image(5).1567754174.png "SQLServer12-1")

### Установка SQL SERVER 16/17

***Примечание: Установщик сделает все автоматически***

![alt-У вас не загрузилось :( ](http://ipic.su/img/img7/fs/Snifyvfyvvmok.1567754284.png "SQLServer12-1")


### Контрольные вопросы 
- ***SSMS*** - графическое оболочка представления СУБД SQL;
- База данных ***master*** - содержит всю системную информацию о SQL Server
- База данных ***model*** - используется в качестве шаблона для всех баз данных, созданных для экземпляра SQL Server.
- База данных ***msdb*** - используется агентом SQL Server для создания расписания предупреждений и заданий, а также другими компонентами, такими как среда SQL Server Management Studioи компоненты Компонент Service Broker и Database Mail.
- База данных ***tempdb*** - tempdb создается при каждом запуске SQL Server. это глобальный ресурс, доступный всем пользователям, подключенным к экземпляру SQL Server или базе данных SQL. База данных tempdb служит для хранения следующих объектов: Временных пользовательских обьектов и внутренних обьектов. 
